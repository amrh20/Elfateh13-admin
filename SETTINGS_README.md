# صفحة الإعدادات - متجر الفتح

## نظرة عامة

صفحة الإعدادات هي واجهة شاملة لإدارة جميع إعدادات المتجر والموقع. تم تصميمها لتكون سهلة الاستخدام ومتجاوبة مع جميع أحجام الشاشات.

## الميزات الرئيسية

### 1. إعدادات الموقع
- **اسم الموقع**: اسم المتجر المعروض للمستخدمين
- **وصف الموقع**: وصف مختصر للمتجر
- **شعار الموقع**: رابط شعار المتجر

### 2. معلومات الاتصال
- **البريد الإلكتروني**: البريد الإلكتروني الرئيسي للتواصل
- **رقم الهاتف**: رقم الهاتف للتواصل
- **العنوان**: العنوان الفعلي للمتجر

### 3. إعدادات العملة
- **العملة**: العملة المستخدمة في المتجر (EGP, USD, EUR, SAR)
- **رمز العملة**: رمز العملة المعروض مع الأسعار

### 4. إعدادات الطلبات
- **بريد إشعارات الطلبات**: البريد الإلكتروني لإشعارات الطلبات الجديدة
- **تأكيد الطلبات تلقائياً**: تفعيل/إلغاء التأكيد التلقائي للطلبات
- **تطلب تأكيد الطلب**: تفعيل/إلغاء الحاجة لتأكيد الطلب يدوياً

### 5. إعدادات الشحن
- **حد الشحن المجاني**: الحد الأدنى للطلب للحصول على شحن مجاني
- **تكلفة الشحن**: التكلفة الافتراضية للشحن

### 6. إعدادات الضرائب
- **نسبة الضريبة**: نسبة الضريبة المطبقة على الطلبات
- **إدراج الضريبة في السعر**: إدراج الضريبة في السعر المعروض أم لا

### 7. إعدادات الأمان
- **تطلب كلمات مرور قوية**: تفعيل/إلغاء متطلبات كلمات المرور القوية
- **مهلة الجلسة**: الوقت بالدقائق قبل انتهاء صلاحية الجلسة

### 8. إعدادات الإشعارات
- **إشعارات البريد الإلكتروني**: تفعيل/إلغاء إشعارات البريد الإلكتروني
- **إشعارات الرسائل النصية**: تفعيل/إلغاء إشعارات الرسائل النصية
- **الإشعارات الفورية**: تفعيل/إلغاء الإشعارات الفورية

## الملفات المكونة

### المكونات
- `src/app/components/settings/settings.component.ts` - منطق المكون
- `src/app/components/settings/settings.component.html` - واجهة المستخدم
- `src/app/components/settings/settings.component.scss` - التنسيقات
- `src/app/components/settings/settings.component.spec.ts` - اختبارات المكون

### الخدمات
- `src/app/services/settings.service.ts` - خدمة إدارة الإعدادات
- `src/app/services/settings.service.spec.ts` - اختبارات الخدمة

## الاستخدام

### الوصول للصفحة
```
http://localhost:4200/settings
```

### حفظ الإعدادات
1. قم بتعديل الإعدادات المطلوبة
2. اضغط على زر "حفظ الإعدادات"
3. ستظهر رسالة تأكيد نجاح الحفظ

### إعادة تعيين الإعدادات
1. اضغط على زر "إعادة تعيين"
2. أكد العملية في النافذة المنبثقة
3. سيتم إعادة جميع الإعدادات للقيم الافتراضية

## التحقق من صحة البيانات

### الحقول المطلوبة
- اسم الموقع
- البريد الإلكتروني (بالتنسيق الصحيح)
- بريد إشعارات الطلبات (بالتنسيق الصحيح)
- العملة
- رمز العملة

### القيود
- نسبة الضريبة: 0-100%
- مهلة الجلسة: 5-120 دقيقة
- تكلفة الشحن: 0 أو أكثر
- حد الشحن المجاني: 0 أو أكثر

## التخزين

### التخزين المحلي
- يتم حفظ الإعدادات في `localStorage` تحت مفتاح `app_settings`
- يتم تحميل الإعدادات تلقائياً عند بدء التطبيق
- يتم دمج الإعدادات المحفوظة مع الإعدادات الافتراضية

### التخزين في الخادم (مستقبلاً)
- يمكن ربط الخدمة بـ API حقيقي لحفظ الإعدادات في قاعدة البيانات
- سيتم إضافة دوال للتواصل مع الخادم

## الدوال المساعدة

### حساب تكلفة الشحن
```typescript
const shippingCost = settingsService.calculateShippingCost(orderTotal);
```

### حساب الضريبة
```typescript
const taxAmount = settingsService.calculateTax(amount);
```

### تنسيق السعر
```typescript
const formattedPrice = settingsService.formatPrice(price);
```

## الاختبارات

### تشغيل الاختبارات
```bash
npm test -- --include="**/settings/**"
```

### تغطية الاختبارات
```bash
npm run test:coverage
```

## التخصيص

### إضافة إعدادات جديدة
1. أضف الحقل الجديد إلى واجهة `Settings`
2. أضف التحكم في النموذج
3. أضف الحقل في HTML
4. أضف القيمة الافتراضية في `getDefaultSettings()`

### تخصيص التصميم
- يمكن تعديل الألوان في ملف SCSS
- يمكن إضافة أيقونات جديدة
- يمكن تغيير تخطيط الصفحة

## الأمان

### التحقق من الصلاحيات
- يجب التأكد من أن المستخدم لديه صلاحيات إدارة الإعدادات
- يمكن إضافة حماية إضافية للوصول للصفحة

### التحقق من البيانات
- يتم التحقق من صحة جميع المدخلات
- يتم تنظيف البيانات قبل الحفظ
- يتم التعامل مع الأخطاء بشكل آمن

## الدعم

### المتصفحات المدعومة
- Chrome (الإصدار 90+)
- Firefox (الإصدار 88+)
- Safari (الإصدار 14+)
- Edge (الإصدار 90+)

### الأجهزة المدعومة
- أجهزة سطح المكتب
- الأجهزة اللوحية
- الهواتف الذكية

## التطوير المستقبلي

### الميزات المخطط لها
- [ ] رفع الصور (الشعار)
- [ ] إعدادات متقدمة للأمان
- [ ] إعدادات SEO
- [ ] إعدادات الترجمة
- [ ] نسخ احتياطية للإعدادات
- [ ] سجل التغييرات

### التحسينات المخطط لها
- [ ] تحسين الأداء
- [ ] إضافة المزيد من التحقق من صحة البيانات
- [ ] تحسين تجربة المستخدم
- [ ] إضافة المزيد من الاختبارات 